<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>FC25 - Générateur d'équipe</title>
</head>
<body>
    <h1>⚽ FC25 - Générateur d'équipe optimal</h1>

    <form method="post">
        <label for="critere">Critère à maximiser :</label>
        <select name="critere" id="critere" required>
            {% for crit in criteres %}
                <option value="{{ crit }}" {% if crit == selected_critere %}selected{% endif %}>{{ crit }}</option>
            {% endfor %}
        </select>

        <label for="budget">Budget (en millions €) :</label>
        <input type="number" name="budget" id="budget" placeholder="ex: 500" required>

        <label for="formation">Formation :</label>
        <select name="formation" id="formation">
            {% for formation in formations %}
                <option value="{{ formation }}">{{ formation }}</option>
            {% endfor %}
        </select>

        <button type="submit">Construire l’équipe</button>
    </form>

    {% if equipe %}
        <h2>Équipe générée (critère : {{ selected_critere }})</h2>
        <table border="1">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Poste</th>
                    <th>Valeur (€)</th>
                    <th>Club</th>
                    <th>Nationalité</th>
                    <th>{{ selected_critere }}</th>
                </tr>
            </thead>
            <tbody>
                {% for joueur in equipe %}
                    <tr>
                        <td>{{ joueur["name"] }}</td>
                        <td>{{ joueur["role"] }}</td>
                        <td>{{ '{:,.0f}'.format(joueur["value"]) }}</td>
                        <td>{{ joueur["club_name"] }}</td>
                        <td>{{ joueur["country_name"] }}</td>
                        <td>{{ joueur[selected_critere] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
</body>
</html>
