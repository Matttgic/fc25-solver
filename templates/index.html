<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>FC25 - Générateur d'équipe</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <h1 class="mb-4 text-center">FC25 - Générateur d'équipe</h1>

    <form method="POST" class="card p-4 shadow-sm">
      <div class="row mb-3">
        <div class="col-md-4">
          <label class="form-label">Budget (en millions €)</label>
          <input type="number" name="budget" class="form-control" placeholder="ex: 500" required>
        </div>
        <div class="col-md-4">
          <label class="form-label">Critère de sélection</label>
          <select name="criterion" class="form-select" required>
            {% for col in criteria %}
              <option value="{{ col }}">{{ col }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Formation</label>
          <select name="formation" class="form-select" required>
            {% for f in formations %}
              <option value="{{ f }}">{{ f }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Construire l'équipe</button>
    </form>

    {% if results %}
      <div class="mt-5">
        <h3>Composition optimale :</h3>
        <table class="table table-bordered table-hover mt-3">
          <thead class="table-dark">
            <tr>
              <th>Nom</th>
              <th>Poste</th>
              <th>Valeur (€)</th>
              <th>Critère choisi</th>
            </tr>
          </thead>
          <tbody>
            {% for player in results %}
              <tr>
                <td>{{ player.name }}</td>
                <td>{{ player.positions }}</td>
                <td>{{ "{:.0f}".format(player.value) }}</td>
                <td>
                  {% for key, value in player.items() %}
                    {% if key not in ['name', 'positions', 'value'] %}
                      {{ key }}: {{ value }}
                    {% endif %}
                  {% endfor %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endif %}
  </div>
</body>
</html>
