<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>FC25 - G√©n√©rateur d'√©quipe</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h1 class="mb-4 text-center">‚öΩ G√©n√©rateur d'√©quipe FC25</h1>
    <form method="POST" class="card p-4 shadow-sm">
        <div class="row mb-3">
            <div class="col-md-4">
                <label for="formation" class="form-label">Formation</label>
                <select class="form-select" id="formation" name="formation" required>
                    {% for key, value in formations.items() %}
                        <option value="{{ key }}" {% if selected_formation == key %}selected{% endif %}>{{ key }} : {{ value|join(', ') }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4">
                <label for="critere" class="form-label">Crit√®re de s√©lection</label>
                <select class="form-select" id="critere" name="critere" required>
                    {% for critere in criteres %}
                        <option value="{{ critere }}" {% if selected_critere == critere %}selected{% endif %}>{{ critere }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4">
                <label for="budget" class="form-label">Budget (en millions ‚Ç¨)</label>
                <input type="number" class="form-control" id="budget" name="budget" min="1" max="10000" value="{{ budget or '' }}" required>
            </div>
        </div>
        <div class="d-grid">
            <button type="submit" class="btn btn-primary">Construire l'√©quipe</button>
        </div>
    </form>

    {% if equipe %}
        <div class="card mt-5 p-4 shadow-sm">
            <h3 class="mb-4 text-center">üß† √âquipe g√©n√©r√©e</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Poste</th>
                        <th>Club</th>
                        <th>Note</th>
                        <th>Valeur (‚Ç¨M)</th>
                        <th>Crit√®re choisi</th>
                    </tr>
                </thead>
                <tbody>
                    {% for joueur in equipe %}
                        <tr>
                            <td>{{ joueur['name'] }}</td>
                            <td>{{ joueur['position'] }}</td>
                            <td>{{ joueur['club_name'] }}</td>
                            <td>{{ joueur['overall_rating'] }}</td>
                            <td>{{ "%.2f"|format(joueur['estimated_value']) }}</td>
                            <td>{{ joueur[selected_critere] }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="text-end fw-bold">
                Total d√©pens√© : {{ total_value|round(2) }} M‚Ç¨
            </div>
        </div>
    {% endif %}
</div>
</body>
</html>
